PHP与WEB
---

到[Route](0.2-route.md)一节，我们的微PHP-MVC框架已经可以在web服务器上跑了。但是，在开始后面的部分之前，这里，我需要回过头来介绍一下PHP的历史。

PHP最早是用于HTML页面处理的（事实现在也是如此:P），PHP之H其实跟HTML的H是一个意思，代表”超文本"(hybertext)。在前面的目录里面，我有介绍到，PHP等web后端语言的核心工作是生产HTML页面，为什么如此说呢？这得从web的原理来剥析。

web的几大核心组件：
* 协议： Url资源定位协议 / http传输协议
* 服务器：nginx/apache/tomcat
* 资源：互联网上传输下载的各种数据文件
* 应用：提供web用户界面的应用程序--web浏览器

> 补充：资源是互联网上传输的各种数据的统称。比如html/js/css文件，png/jpeg文件，avi/mp3/mp4文件等都可称之为“资源”。

几大关键技术：
* 超文本标记语言HTML，前端语言JS，样式表CSS
* session/cookie
* 后端处理语言（PHP/Java/C#）
* DB/CACHE

这里，其实我们常用的html/js/css/session/cookie/php/mysql，在我看来，都不是web的核心组件，我认为web的核心组件有四个：

1、web世界的运行基础规则：url/http

正如我们的世界是由一系列的基本规则来维系整个世界的运行，web同样也有一系列的基础规则以保证其有序。

我们常见的URL其实不只是一段字符串，而是一个协议：统一资源定位符。简单说，它是web世界的门牌号，有了这个，你才能找到每个资源的位置。

而我们经常说的HTTP是什么呢？HTTP是一个应用传输层协议，它约定了互联网上的数据如何进行传输，用户如何与数据进行交互。简单说，就是web世界的卡车。

当然，光这两个协议我们的web世界肯定不能正常运转。我们还有一系列的RFC（Request For Comment）作为补充协议来一起构建了web世界的运行规则。

2、web世界振动的弦：服务器

有了基础的规则，我们需要遵循这些基础规则来”创造“一些”物质”，这样才有一切生存的基础。而Web的世界里，一切的存在的基石就是web服务器。正是它们源源不断的向web世界里不断注入活力，让web能够不断往前发展。

web服务器简单说，就是一组遵循http/url等协议的应用程序，它负责依据协议向用户提供想要的资源内容。它是资源的容器，也是构成web网络的一个个节点。

3、资源：

可以说，web存在最大的意义就是它了。如果没有流动的资源，那么web将不为web。资源则是在web服务器上存储/生产的一系列的静态或动态的数据。包括我们的html，css，js等。宇宙（web世界）的本质在于弦（web服务器）不断的振动创造物质（资源），并在时空上爆炸（资源的流动）。web和我们的世界多么的类似？

4、用户操作界面：web浏览器

web浏览器的工作原理就是基于url/http协议，来与服务器进行交互，给用户提供一个操作界面。对于现代浏览器而言，这个操作界面通常是可视化的。

所以，web浏览器的职责就是把一些资源，通常是html/css/js等，从服务器上取来，并按照约定的规则进行解析，可视化，然后展示给终端用户，并根据终端用户的操作转换为协议指令发送到服务器端。

随着web的发展，应用范围越来越广，才逐渐产生了session/cookie等技术以辅助进行http的会话保持（http在设计之初并未考虑“用户”的概念，固也无会话）和PHP等服务器端技术以辅助后端服务器进行资源文件的操作。

所以，我前文提到，PHP其实严格意义上来说，只是一个辅助生成资源的服务器端技术。在最早期的时候，它甚至只是简单的用于产生HTML文档。

说了这么多，其实主要是想跟大家介绍PHP在服务器端做的主要事情只有一个：产生html文档。而这个文档经过url的定位，http的传输，浏览器的解析可视化，最终变成了我们看到的那个样子。

知道了这点，我们才能在实际的后端编程工作中不去迷失，所有的PHP代码只为一个目的：如何产生用户需求的HTML内容？

而生产用户需求的HTML内容的过程，我们有个现代点的做法：模板渲染。

PHP的模板渲染
---

模板渲染其实就是按照请求的业务逻辑，用数据填充HTML模板，并产生符合HTML语义的内容到终端用户。而PHP其实天生就是为了做这个事情的。

为什么说“PHP是天生为了辅助生成HTML内容”的呢？因为这个语言的诞生不像很多其他的语言（C#/JAVA/C等），它诞生的目的就是提供一组工具以帮助人们更好的生成HTML内容。可以说，PHP发展至今，是从帮助生成HTML文档这个最淳朴的出发点开始，并伴随着web的发展，慢慢的能够做更多的事情。

可以说web开发是嵌入到了PHP的灵魂中去了，PHP脚本的运行就是一个生产HTML内容的过程。比如说，我们常见的require类函数，其实运行的过程就是以PHP的方式输出require进来的内容。（以PHP的方式的意思是：如果里面有合法的PHP语义，则解析执行PHP语义内容，如果无PHP语义，则直接输出内容）所以，我们require一个文件（可以为php代码文件，可以为html文件）的过程，其实就是输出这个文件。
